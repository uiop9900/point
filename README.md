# 목차

1. 스펙
2. 패키징 구조
2. DB
3. 구현한 API
4. 구현한 기술


## 패키징 구조

## DB
| 테이블   | MEMBER                                 | POINT                                                                    | POINT_HISTORY                               | POINT_HST_RECORD                               |
|-------|----------------------------------------|--------------------------------------------------------------------------|---------------------------------------------|------------------------------------------------|
| 정의    | 사용자                                    | 최초 적립시, 포인트                                                              | 포인트 `적립`, `만료`, `사용`, `취소` 시 다 쌓이는 히스토리 테이블 | `POINT`와 `POINT_HISTORY`의 중간테이블 (포인트취소를 위해 생성) |
| 주요 컬럼 | - name: 이름  <br/> - phoneNumber: 핸드폰번호 | - amt : 최초 적립시 포인트<br/> - remainAmt: 사용가능한 포인트<br/>- PointStatus: 포인트 상태 | - PointType: 포인트 상태값                        | - Point<br/> - PointHistory                    |


## 구현한 API
- 회원가입
    - 사용자를 등록하는 API
- 포인트 적립
    - 포인트를 쌓는 API
    - 최초로 쌓을때 등록된다. 해당 point를 전체사용, 부분사용이 가능하다.
- 포인트 사용
    - 포인트를 사용하는 API
    - 포인트 사용시에 남은 포인트 금액에 따라 해당 포인트의 상태가 결정된다.(`사용중`, `사용완료`)
    - 해당 포인트의 사용 가능한 금액은 point_remainAmt에 저장된다.
- 포인트 취소(롤백)
    - 포인트를 취소한다 는 건 사용목록을 확인하고 취소한다. -> 포인트를 사용한대로 db에 쌓는 point_hst를 request로 받는다.
    - 해당 포인트를 찾아서 만료시일을 확인해 해당 포인트를 원복(`취소`) 혹은 만료시킨다.
- 포인트 만료
    - 매일 자정에 만료시일이 된 포인트들을 만료시킨다.
- 사용자별 포인트 조회(페이징)
    - 사용자별로 포인트를 얼마나 사용하고 적립했는지 목록을 페이징해 보여준다.

## 구현한 기술
- 레디스
    - 동시성 이슈(Redis Lock)
    - 캐싱
- ExceptionHandler
- 공통 Response
- 페이징
- jmeter

